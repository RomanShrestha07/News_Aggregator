{% extends 'AggregatorApp/base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block css-head %}
    <style>
        .entity_footer {
            border-bottom: 0;
        }

        .tag {
            margin-top: 5px;
        }

        .entity_inner__title::after {
            bottom: 22px;
        }
    </style>
{% endblock %}

{% block title %}{{ news.headline }}{% endblock %}

{% block content %}
    <section id="entity_section" class="entity_section">

        <div class="container">
            <div class="row">

                <div class="col-md-8">
                    <div class="entity_wrapper">

                        <div class="entity_title">
                            <h1>{{ news.headline }}</h1>

                            {% if news.url in saved %}
                                <a href="{% url 'AggregatorApp:saved-news' %}" class="btn btn-default">Saved</a>
                            {% else %}
                                <a href="{% url 'AggregatorApp:save-news' news.pk %}" class="btn btn-default">Save</a>
                            {% endif %}
                        </div>
                        <!-- entity_title -->

                        <div class="entity_meta">
                            Source: <a
                                href="{% url 'AggregatorApp:news-by-source' news.source %}"> {{ news.source }}</a>&nbsp
                            Date: <a
                                href="{% url 'AggregatorApp:news-by-date' news.date_time %}"> {{ news.date_time }}</a>&nbsp
                            Author: <a
                                href="{% url 'AggregatorApp:news-by-author' news.author %}"> {{ news.author }}</a>&nbsp

                            {% if news.section == 'Science and Technology' %}
                                Section:
                                <a href="{% url 'AggregatorApp:category' 'science-technology' %}"> {{ news.section }}</a>
                            {% else %}
                                Section:
                                <a href="{% url 'AggregatorApp:category' news.section.lower %}"> {{ news.section }}</a>
                            {% endif %}
                        </div>
                        <!-- entity_meta -->

                        <div class="entity_rating"></div>
                        <!-- entity_rating -->

                        <div class="entity_thumb">
                            <img class="img-responsive" src="{{ news.image }}" alt="feature-top">
                        </div>
                        <!-- entity_thumb -->

                        <div class="entity_content">
                            {% for con in news.content %}
                                <p class="text-justify">{{ con }}</p>
                            {% endfor %}
                        </div>
                        <!-- entity_content -->

                        <div class="entity_footer">
                            <div class="entity_tag">
                                <div class="dropdown">
                                    {% for tag in news.tags.all %}
                                        {% if tag.name != '-' %}
                                            <span class="tag">
                                                <a href="{% url 'AggregatorApp:news_list_by_tag' tag.slug %}">
                                                    {{ tag.name }}
                                                </a>&nbsp
                                                <a href="{% url 'AggregatorApp:add-tag' tag.slug %}">
                                                    <i class="fa fa-plus"></i>
                                                </a>
                                        </span>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                            <!-- entity_tag -->
                        </div>
                        <!-- entity_footer -->
                    </div>
                    <!-- entity_wrapper -->
                    <br/>
                    <hr style="border-color: white">

                    {#                    <div class="related_news">#}
                    {#                        <div class="entity_inner__title header_purple">#}
                    {#                            <h2><a href="#">Related News</a></h2>#}
                    {#                        </div>#}
                    {#                        <!-- entity_title -->#}
                    {##}
                    {#                        <div class="row">#}
                    {#                            <div class="col-md-6">#}
                    {#                                <div class="media">#}
                    {#                                    <div class="media-left">#}
                    {#                                        <a href="#"><img class="media-object" src="assets/img/cat-mobi-sm1.jpg"#}
                    {#                                                         alt="Generic placeholder image"></a>#}
                    {#                                    </div>#}
                    {#                                    <div class="media-body">#}
                    {#                                        <span class="tag purple"><a href="category.html"#}
                    {#                                                                    target="_self">Mobile</a></span>#}
                    {##}
                    {#                                        <h3 class="media-heading"><a href="single.html" target="_self">Apple launches#}
                    {#                                            photo-centric wrist#}
                    {#                                            watch for Android</a></h3>#}
                    {#                                        <span class="media-date"><a href="#">10Aug- 2015</a>,  by: <a#}
                    {#                                                href="#">Eric joan</a></span>#}
                    {##}
                    {#                                        <div class="media_social">#}
                    {#                                            <span><a href="#"><i class="fa fa-share-alt"></i>424</a> Shares</span>#}
                    {#                                            <span><a href="#"><i class="fa fa-comments-o"></i>4</a> Comments</span>#}
                    {#                                        </div>#}
                    {#                                    </div>#}
                    {#                                </div>#}
                    {#                                <div class="media">#}
                    {#                                    <div class="media-left">#}
                    {#                                        <a href="#"><img class="media-object" src="assets/img/cat-mobi-sm3.jpg"#}
                    {#                                                         alt="Generic placeholder image"></a>#}
                    {#                                    </div>#}
                    {#                                    <div class="media-body">#}
                    {#                                        <span class="tag purple"><a href="category.html"#}
                    {#                                                                    target="_self">Mobile</a></span>#}
                    {##}
                    {#                                        <h3 class="media-heading"><a href="single.html" target="_self">The Portable#}
                    {#                                            Charger or data#}
                    {#                                            cable</a></h3>#}
                    {#                                        <span class="media-date"><a href="#">10Aug- 2015</a>,  by: <a#}
                    {#                                                href="#">Eric joan</a></span>#}
                    {##}
                    {#                                        <div class="media_social">#}
                    {#                                            <span><a href="#"><i class="fa fa-share-alt"></i>424</a> Shares</span>#}
                    {#                                            <span><a href="#"><i class="fa fa-comments-o"></i>4</a> Comments</span>#}
                    {#                                        </div>#}
                    {#                                    </div>#}
                    {#                                </div>#}
                    {#                            </div>#}
                    {#                            <div class="col-md-6">#}
                    {#                                <div class="media">#}
                    {#                                    <div class="media-left">#}
                    {#                                        <a href="#"><img class="media-object" src="assets/img/cat-mobi-sm2.jpg"#}
                    {#                                                         alt="Generic placeholder image"></a>#}
                    {#                                    </div>#}
                    {#                                    <div class="media-body">#}
                    {#                                        <span class="tag purple"><a href="category.html"#}
                    {#                                                                    target="_self">Mobile</a></span>#}
                    {##}
                    {#                                        <h3 class="media-heading"><a href="single.html" target="_self">Iphone 6 launches#}
                    {#                                            white & Grey#}
                    {#                                            colors handset</a></h3>#}
                    {#                                        <span class="media-date"><a href="#">10Aug- 2015</a>,  by: <a#}
                    {#                                                href="#">Eric joan</a></span>#}
                    {##}
                    {#                                        <div class="media_social">#}
                    {#                                            <span><a href="#"><i class="fa fa-share-alt"></i>424</a> Shares</span>#}
                    {#                                            <span><a href="#"><i class="fa fa-comments-o"></i>4</a> Comments</span>#}
                    {#                                        </div>#}
                    {#                                    </div>#}
                    {#                                </div>#}
                    {#                                <div class="media">#}
                    {#                                    <div class="media-left">#}
                    {#                                        <a href="#"><img class="media-object" src="assets/img/cat-mobi-sm4.jpg"#}
                    {#                                                         alt="Generic placeholder image"></a>#}
                    {#                                    </div>#}
                    {#                                    <div class="media-body">#}
                    {#                                        <span class="tag purple"><a href="category.html"#}
                    {#                                                                    target="_self">Mobile</a></span>#}
                    {#                                        <a href="single.html" target="_self"><h3 class="media-heading">Fully new look#}
                    {#                                            slim handset#}
                    {#                                            like</h3></a>#}
                    {#                                        <span class="media-date"><a href="#">10Aug- 2015</a>,  by: <a#}
                    {#                                                href="#">Eric joan</a></span>#}
                    {##}
                    {#                                        <div class="media_social">#}
                    {#                                            <span><a href="#"><i class="fa fa-share-alt"></i>424</a> Shares</span>#}
                    {#                                            <span><a href="#"><i class="fa fa-comments-o"></i>4</a> Comments</span>#}
                    {#                                        </div>#}
                    {#                                    </div>#}
                    {#                                </div>#}
                    {#                            </div>#}
                    {#                        </div>#}
                    {#                    </div>#}
                    <!-- Related news -->

                    <hr>

                    <div class="readers_comment">
                        <div class="entity_inner__title header_purple">
                            <h2>Readers Comment</h2>
                        </div>
                        <!-- entity_title -->

                        {% with comments.count as total_comments %}
                            <h2>
                                {{ total_comments }} comment{{ total_comments|pluralize }}
                            </h2>
                        {% endwith %}

                        {% for comment in comments %}
                            <div class="media">
                                <div class="media-body">
                                    <h2 class="media-heading" style="display: inline-block; margin-right: 10px;">
                                        {{ comment.user }}
                                    </h2>
                                    <h6 style="display: inline-block; font-size: x-small; color: #7d7d7d;">
                                        {{ comment.created }}
                                    </h6>
                                    <p style="font-size: medium">{{ comment.body|linebreaks }}</p>
                                </div>
                            </div>
                            <!-- media end -->
                        {% empty %}
                            <hr>
                            <h6>There are no comments yet.</h6>
                            <hr>
                        {% endfor %}
                    </div>
                    <!--Readers Comment-->

                    <div class="entity_comments">
                        <div class="entity_inner__title header_black">
                            <h2>Add a Comment</h2>
                        </div>
                        <!--Entity Title -->

                        {% if user.is_authenticated %}

                            {% if new_comment %}
                                <h2>Your comment has been added.</h2>
                            {% else %}
                                <div class="entity_comment_from">
                                    <form method="post">
                                        {% csrf_token %}
                                        <div class="form-group">
                                            <input type="text" class="form-control" id="inputName"
                                                   placeholder="{{ request.user }}" readonly>
                                        </div>

                                        <div class="form-group comment">
                                            {% render_field comment_form.body class="form-control form-control-user" placeholder="Comment" %}
                                        </div>

                                        <button type="submit" class="btn btn-submit red">Add Comment</button>
                                    </form>
                                </div>
                            {% endif %}
                        {% else %}
                            <h2>Please login to comment.</h2>
                        {% endif %}
                        <!--Entity Comments From -->
                    </div>
                    <!--Entity Comments -->
                </div>
                <!--Left Section-->

                {% include 'AggregatorApp/parts/side-bar-category.html' %}
                <!-- row -->

            </div>
            <!-- container -->
        </div>

    </section>
    <!-- Entity Section Wrapper -->
{% endblock %}
